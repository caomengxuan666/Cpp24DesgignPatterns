// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
// â”ƒ  MODULE   ::  Tag Dispatching                                               â”ƒ
// â”ƒ  PURPOSE   ::  Overload resolution based on tag types                        â”ƒ
// â”ƒ  CATEGORY  ::  Metaprogramming                                              â”ƒ
// â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›


#include <iterator>
#include <print>
#include <vector>
using std::println;


// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å®ç°å‡½æ•° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

template<typename Iter>
void advance_impl(Iter &it, int n, std::random_access_iterator_tag) {
    it += n;
    println("âš¡ éšæœºè®¿é—®è¿­ä»£å™¨ï¼šç›´æ¥è·³è½¬");
}

template<typename Iter>
void advance_impl(Iter &it, int n, std::bidirectional_iterator_tag) {
    if (n >= 0) {
        while (n--) ++it;
    } else {
        while (n++) --it;
    }
    println("âª åŒå‘è¿­ä»£å™¨ï¼šé€ä¸ªç§»åŠ¨");
}

template<typename Iter>
void advance_impl(Iter &it, int n, std::forward_iterator_tag) {
    while (n--) ++it;
    println("â¡ï¸  å‰å‘è¿­ä»£å™¨ï¼šåªèƒ½å‘å‰");
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ¥å£å‡½æ•° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

template<typename Iter>
void advance(Iter &it, int n) {
    using category = typename std::iterator_traits<Iter>::iterator_category;
    advance_impl(it, n, category{});
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æµ‹è¯•å‡½æ•° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

void testTagDispatching() {
    println("\nğŸ§ª æ ‡ç­¾åˆ†å‘");

    std::vector<int> vec = {1, 2, 3, 4, 5};
    auto it = vec.begin();
    advance(it, 3);// éšæœºè®¿é—®
    println("å½“å‰å€¼: {}", *it);
}

int main() {
    testTagDispatching();
}