// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
// â”ƒ  MODULE   ::  Template Method Pattern                                       â”ƒ
// â”ƒ  PURPOSE   ::  Define algorithm skeleton in base class                      â”ƒ
// â”ƒ  CATEGORY  ::  Behavioral Pattern                                           â”ƒ
// â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

/**
 * @file    template_method.cpp
 * @brief   ç°ä»£ C++20 å®ç°æ¨¡æ¿æ–¹æ³•æ¨¡å¼
 * @details 
 *          æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Method Patternï¼‰æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒåœ¨æŠ½è±¡åŸºç±»ä¸­å®šä¹‰ç®—æ³•çš„éª¨æ¶ï¼Œ
 *          å°†æŸäº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­å®ç°ã€‚å®ƒè®©ä½ åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹é‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›æ­¥éª¤ã€‚
 * 
 * @par æ ¸å¿ƒæ€æƒ³
 *      - æŠ½è±¡ç±»å®šä¹‰ç®—æ³•éª¨æ¶ï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰
 *      - å…·ä½“å­ç±»å®ç°æŠ½è±¡æ­¥éª¤
 *      - æ¨¡æ¿æ–¹æ³•é€šå¸¸ä¸º finalï¼Œé˜²æ­¢è¢«é‡å†™
 * 
 * @note    æœ¬å®ç°ä½¿ç”¨ NVIï¼ˆéè™šæ¥å£ï¼‰æ¨¡å¼ï¼Œæé«˜å®‰å…¨æ€§
 * @warning é¿å…åœ¨æ„é€ å‡½æ•°/ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°
 * @todo    æ”¯æŒç¼–è¯‘æ—¶å¤šæ€ï¼ˆCRTPï¼‰
 * @date    2025-08-19
 * @version 1.0
 */

#include <print>
using std::println;

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŠ½è±¡ç±»ï¼šMakeObject â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

/**
 * @brief æŠ½è±¡åŸºç±»ï¼šå®šä¹‰å¯¹è±¡åˆ¶ä½œæµç¨‹
 */
class MakeObject {
protected:
    /**
     * @brief æ­¥éª¤1ï¼šåˆ¶ä½œå¤´éƒ¨ï¼ˆæŠ½è±¡ï¼‰
     */
    virtual void makeHead() const = 0;

    /**
     * @brief æ­¥éª¤2ï¼šåˆ¶ä½œèº«ä½“ï¼ˆæŠ½è±¡ï¼‰
     */
    virtual void makeBody() const = 0;

    /**
     * @brief æ­¥éª¤3ï¼šç©¿è¡£ï¼ˆæŠ½è±¡ï¼‰
     */
    virtual void garb() const = 0;

    /**
     * @brief é’©å­æ–¹æ³•ï¼šæ˜¯å¦éœ€è¦ç‰¹æ®Šå¤„ç†ï¼ˆå¯é€‰é‡å†™ï¼‰
     * @return bool
     */
    virtual bool needSpecialProcessing() const {
        return false;
    }

    /**
     * @brief é’©å­æ–¹æ³•ï¼šç‰¹æ®Šå¤„ç†ï¼ˆé»˜è®¤ç©ºå®ç°ï¼‰
     */
    virtual void specialProcessing() const {
        // å­ç±»å¯é‡å†™
    }

public:
    /**
     * @brief æ¨¡æ¿æ–¹æ³•ï¼šå®šä¹‰ç®—æ³•éª¨æ¶ï¼ˆNVI æ¨¡å¼ï¼‰
     * @note å£°æ˜ä¸º finalï¼Œé˜²æ­¢å­ç±»ä¿®æ”¹æµç¨‹
     */
    void make() const {
        println("ğŸ”§ å¼€å§‹åˆ¶ä½œå¯¹è±¡...");
        makeHead();
        makeBody();
        if (needSpecialProcessing()) {
            specialProcessing();
        }
        garb();
        println("âœ… åˆ¶ä½œå®Œæˆï¼");
    }

    virtual ~MakeObject() = default;
};

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å…·ä½“å­ç±»ï¼šMakeGirlFriend â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

/**
 * @brief åˆ¶ä½œå¥³æœ‹å‹
 */
class MakeGirlFriend final : public MakeObject {
    void makeHead() const override {
        println("ğŸ§ é˜¿ç‹¸çš„å¤´");
    }

    void makeBody() const override {
        println("ğŸ’ƒ å¡èçš„èº«æ");
    }

    void garb() const override {
        println("ğŸ‘• å¥èº«æœ");
    }

    bool needSpecialProcessing() const override {
        return true;
    }

    void specialProcessing() const override {
        println("âœ¨ æ·»åŠ å¯çˆ±æ»¤é•œ + ç¾é¢œ");
    }
};

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å…·ä½“å­ç±»ï¼šMakeBoyFriend â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

/**
 * @brief åˆ¶ä½œç”·æœ‹å‹
 */
class MakeBoyFriend final : public MakeObject {
    void makeHead() const override {
        println("ğŸ¥· æš®å…‰ä¹‹çœ¼çš„å¤´");
    }

    void makeBody() const override {
        println("ğŸ«¡ æ…çš„èº«æ");
    }

    void garb() const override {
        println("ğŸ©± è…°å­çš„è¡£æœ");
    }
};

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æµ‹è¯•å‡½æ•° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

/**
 * @brief ä½¿ç”¨å¯¹è±¡åˆ¶ä½œå™¨
 * @param maker åˆ¶ä½œå™¨å¼•ç”¨
 */
void useMaker(const MakeObject& maker) {
    maker.make();
}

/**
 * @brief æµ‹è¯•æ¨¡æ¿æ–¹æ³•æ¨¡å¼
 */
void testTemplateMethod() {
    println("\nğŸ§ª æµ‹è¯• 1: æ¨¡æ¿æ–¹æ³•æ¨¡å¼");

    MakeGirlFriend girl;
    MakeBoyFriend boy;

    println("ğŸ‘© åˆ¶ä½œå¥³æœ‹å‹ï¼š");
    useMaker(girl);

    println("\nğŸ‘¨ åˆ¶ä½œç”·æœ‹å‹ï¼š");
    useMaker(boy);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ä¸»å‡½æ•° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

/**
 * @brief ä¸»å‡½æ•°
 * @return int
 */
int main() {
    println("ğŸ¯ å¼€å§‹æµ‹è¯•ç°ä»£ C++20 æ¨¡æ¿æ–¹æ³•æ¨¡å¼");

    testTemplateMethod();

    println("\nâœ… æ‰€æœ‰æµ‹è¯•å®Œæˆï¼");
    return 0;
}